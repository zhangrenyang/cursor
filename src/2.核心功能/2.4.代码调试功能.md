# 代码调试功能

## 调试基础

### 1. 什么是调试？

调试（Debug）是找出并修复代码中错误的过程。Cursor 提供了强大的调试工具，帮助开发者快速定位和解决问题。

### 2. 调试界面

- **调试工具栏**：
  - 开始/继续（F5）
  - 暂停（F6）
  - 单步执行（F10）
  - 单步进入（F11）
  - 单步跳出（Shift+F11）

- **调试侧边栏**：
  - 变量观察
  - 调用堆栈
  - 断点列表
  - 控制台输出

## 基本调试操作

### 1. 断点管理

- **设置断点**：
  - 点击行号设置/取消断点
  - `F9` 快捷键切换断点
  - 右键设置条件断点

- **断点类型**：
  ```javascript
  // 普通断点
  let x = 1; // 点击行号设置

  // 条件断点
  for(let i = 0; i < 100; i++) {
    // 当 i === 50 时暂停
  }

  // 日志断点
  function process(data) {
    // 记录 data 的值但不暂停
  }
  ```

### 2. 变量监控

- **查看变量**：
  - 悬停查看变量值
  - 在变量面板中观察
  - 添加到监视列表

- **修改变量**：
  - 在调试控制台中修改
  - 使用 `set value` 命令
  - 实时查看修改效果

## 高级调试功能

### 1. 条件调试

- **条件断点**：
  ```javascript
  // 设置条件断点示例
  for(let i = 0; i < 1000; i++) {
    if(i % 100 === 0) {
      console.log(i); // 设置条件：i % 100 === 0
    }
  }
  ```

- **表达式求值**：
  - 在调试时计算表达式
  - 查看复杂对象结构
  - 执行临时代码片段

### 2. 异步调试

- **Promise 调试**：
  - 追踪异步操作
  - 在 then/catch 中断点
  - 查看异步调用栈

- **事件循环调试**：
  - 监控事件触发
  - 追踪回调执行
  - 分析性能问题

## 调试技巧

### 1. 高效调试方法

1. **日志调试**：
   ```javascript
   // 使用 console 方法
   console.log('变量值:', value);
   console.warn('警告信息');
   console.error('错误信息');
   ```

2. **断点调试**：
   - 策略性设置断点
   - 使用条件断点减少暂停
   - 合理使用单步执行

### 2. 性能调试

- **性能分析**：
  - 使用性能面板
  - 分析执行时间
  - 找出性能瓶颈

- **内存调试**：
  - 监控内存使用
  - 检测内存泄漏
  - 分析对象引用

## 常见调试场景

### 1. 错误定位

- **语法错误**：
  - 查看错误提示
  - 定位错误行号
  - 检查代码格式

- **逻辑错误**：
  - 设置关键断点
  - 跟踪变量变化
  - 验证执行流程

### 2. 异常处理

- **捕获异常**：
  ```javascript
  try {
    // 可能出错的代码
  } catch (error) {
    console.error('错误详情:', error);
    // 处理错误
  }
  ```

- **异常断点**：
  - 设置异常断点
  - 捕获未处理异常
  - 分析异常堆栈

## 调试最佳实践

### 1. 调试准备

1. **环境检查**：
   - 确认代码最新
   - 清理缓存
   - 准备测试数据

2. **断点策略**：
   - 合理放置断点
   - 使用条件断点
   - 避免过多断点

### 2. 调试技巧

- **逐步调试**：
  - 从简单处开始
  - 逐步缩小范围
  - 验证每个假设

- **日志记录**：
  - 保持日志清晰
  - 记录关键信息
  - 使用不同日志级别

## 常见问题解决

### 1. 调试器不工作

- **可能原因**：
  - 配置不正确
  - 断点设置问题
  - 源码映射失败

- **解决方法**：
  1. 检查调试配置
  2. 重新设置断点
  3. 确认源码映射

### 2. 性能问题

- **调试变慢**：
  - 减少断点数量
  - 使用条件断点
  - 关闭不必要的面板

- **内存问题**：
  - 及时清理监视
  - 关闭未使用工具
  - 定期重启调试器

## 小结

掌握调试技巧能大大提高开发效率。建议：

1. 熟练使用基本调试功能
2. 学习高级调试技巧
3. 建立调试思维方式
4. 持续积累调试经验

记住，调试是一个需要耐心的过程，合理运用各种调试工具和技巧，能帮助你更快地解决问题。