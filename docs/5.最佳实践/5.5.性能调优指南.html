<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>性能调优指南 cursor</title>
    <meta name="description" content="性能调优是通过分析、优化和改进，提升应用程序运行效率的过程。包括减少资源消耗、提高响应速度、优化用户体验等方面。">
    <link rel="stylesheet" type="text/css" href="../css/main.css?v=1.34.1">
    <link rel="stylesheet" type="text/css" href="../css/tocbot.css?v=1.34.1">
    <link rel="stylesheet" type="text/css" href="../css/media.css?v=1.34.1">
    <link rel="stylesheet" type="text/css" href="../css/sidebar.css?v=1.34.1">
    <link rel="stylesheet" type="text/css" href="../css/copy.css?v=1.34.1">
    <link rel="stylesheet" type="text/css" href="../css/demo-preview.css?v=1.34.1">
    <link rel="icon" href="../cursor.webp" type="image/x-icon">
    <script src="../js/copy.js?v=1.34.1"></script>
    <script src="../js/dark-mode.js?v=1.34.1"></script>
    <script src="../js/markdown-style.js?v=1.34.1"></script>
  </head>
  <body id="idoctotop"><a href="#idoctotop" class="gototop">top</a>
    <header class="header">
      <article class="inner warpper"><a class="logo" href="../index.html"><img alt="cursor logo" src="../cursor.webp">
<span class="title">cursor</span></a>
        <div class="content">
          <ul class="menu">
            <li><a href="../index.html" target="" class="">Home</a></li>
            <li><a href="../about.html" target="" class="">About</a></li>
          </ul><a href="https://github.com/zhangrenyang/cursor" target="_blank" rel="noopener noreferrer" title="Github" name="Github" class="github"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            </svg></a>
          <dark-mode permanent=""></dark-mode>
        </div>
      </article>
    </header>
    <div class="warpper-content warpper">
      <markdown-style theme-auto-switch-disabled="">
        <h1 id="性能调优指南"><a aria-hidden="true" tabindex="-1" href="#性能调优指南" class="anchor"><span class="icon icon-link"></span></a>性能调优指南</h1>
        <h2 id="基础概念"><a aria-hidden="true" tabindex="-1" href="#基础概念" class="anchor"><span class="icon icon-link"></span></a>基础概念</h2>
        <h3 id="1-什么是性能调优"><a aria-hidden="true" tabindex="-1" href="#1-什么是性能调优" class="anchor"><span class="icon icon-link"></span></a>1. 什么是性能调优？</h3>
        <p>性能调优是通过分析、优化和改进，提升应用程序运行效率的过程。包括减少资源消耗、提高响应速度、优化用户体验等方面。</p>
        <h3 id="2-性能指标"><a aria-hidden="true" tabindex="-1" href="#2-性能指标" class="anchor"><span class="icon icon-link"></span></a>2. 性能指标</h3>
        <ul>
          <li>
            <p><strong>加载性能</strong>：</p>
            <ul>
              <li>首次加载时间</li>
              <li>资源加载速度</li>
              <li>页面渲染时间</li>
            </ul>
          </li>
          <li>
            <p><strong>运行性能</strong>：</p>
            <ul>
              <li>CPU 使用率</li>
              <li>内存占用</li>
              <li>响应速度</li>
            </ul>
          </li>
        </ul>
        <h2 id="性能分析"><a aria-hidden="true" tabindex="-1" href="#性能分析" class="anchor"><span class="icon icon-link"></span></a>性能分析</h2>
        <h3 id="1-性能监控"><a aria-hidden="true" tabindex="-1" href="#1-性能监控" class="anchor"><span class="icon icon-link"></span></a>1. 性能监控</h3>
        <ul>
          <li>
            <p><strong>监控工具</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 性能计时</span>
</span><span class="code-line line-number" line="2"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">time</span><span class="token punctuation">(</span><span class="token string">'操作耗时'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token comment">// 执行操作</span>
</span><span class="code-line line-number" line="4"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">timeEnd</span><span class="token punctuation">(</span><span class="token string">'操作耗时'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token comment">// 内存使用</span>
</span><span class="code-line line-number" line="7"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token method function property-access">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 性能计时
console.time(&#x27;操作耗时&#x27;);
// 执行操作
console.timeEnd(&#x27;操作耗时&#x27;);

// 内存使用
console.log(process.memoryUsage());
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p><strong>性能指标</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 页面性能指标</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> metrics <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token constant">FCP</span><span class="token operator">:</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">getEntriesByType</span><span class="token punctuation">(</span><span class="token string">'paint'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">startTime</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="4">  <span class="token constant">TTI</span><span class="token operator">:</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token property-access">timing</span><span class="token punctuation">.</span><span class="token property-access">domInteractive</span> <span class="token operator">-</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token property-access">timing</span><span class="token punctuation">.</span><span class="token property-access">navigationStart</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="5">  <span class="token literal-property property">Load</span><span class="token operator">:</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token property-access">timing</span><span class="token punctuation">.</span><span class="token property-access">loadEventEnd</span> <span class="token operator">-</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token property-access">timing</span><span class="token punctuation">.</span><span class="token property-access">navigationStart</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 页面性能指标
const metrics = {
  FCP: performance.getEntriesByType(&#x27;paint&#x27;)[0].startTime,
  TTI: performance.timing.domInteractive - performance.timing.navigationStart,
  Load: performance.timing.loadEventEnd - performance.timing.navigationStart
};
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
        </ul>
        <h3 id="2-问题定位"><a aria-hidden="true" tabindex="-1" href="#2-问题定位" class="anchor"><span class="icon icon-link"></span></a>2. 问题定位</h3>
        <ul>
          <li>
            <p><strong>性能瓶颈</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 使用 Chrome DevTools 的 Performance 面板</span>
</span><span class="code-line line-number" line="2"><span class="token comment">// 记录性能分析数据</span>
</span><span class="code-line line-number" line="3"><span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">mark</span><span class="token punctuation">(</span><span class="token string">'开始'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4"><span class="token comment">// 执行操作</span>
</span><span class="code-line line-number" line="5"><span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">mark</span><span class="token punctuation">(</span><span class="token string">'结束'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">measure</span><span class="token punctuation">(</span><span class="token string">'操作耗时'</span><span class="token punctuation">,</span> <span class="token string">'开始'</span><span class="token punctuation">,</span> <span class="token string">'结束'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 使用 Chrome DevTools 的 Performance 面板
// 记录性能分析数据
performance.mark(&#x27;开始&#x27;);
// 执行操作
performance.mark(&#x27;结束&#x27;);
performance.measure(&#x27;操作耗时&#x27;, &#x27;开始&#x27;, &#x27;结束&#x27;);
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p><strong>资源分析</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 分析资源加载</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> resources <span class="token operator">=</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">getEntriesByType</span><span class="token punctuation">(</span><span class="token string">'resource'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">resources<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">resource</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>resource<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>resource<span class="token punctuation">.</span><span class="token property-access">duration</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 分析资源加载
const resources = performance.getEntriesByType(&#x27;resource&#x27;);
resources.forEach(resource => {
  console.log(&#x60;${resource.name}: ${resource.duration}ms&#x60;);
});
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
        </ul>
        <h2 id="代码优化"><a aria-hidden="true" tabindex="-1" href="#代码优化" class="anchor"><span class="icon icon-link"></span></a>代码优化</h2>
        <h3 id="1-数据处理"><a aria-hidden="true" tabindex="-1" href="#1-数据处理" class="anchor"><span class="icon icon-link"></span></a>1. 数据处理</h3>
        <ul>
          <li>
            <p><strong>数据结构优化</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 使用 Map 代替对象查找</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token comment">// 代替</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token comment">// 大数据集合使用 Set</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">const</span> uniqueItems <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 使用 Map 代替对象查找
const cache = new Map();

// 代替
const cache = {};

// 大数据集合使用 Set
const uniqueItems = new Set(items);
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p><strong>算法优化</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 优化前</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">function</span> <span class="token function">findItem</span><span class="token punctuation">(</span><span class="token parameter">items<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword control-flow">return</span> items<span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=></span> item<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token comment">// 优化后</span>
</span><span class="code-line line-number" line="7"><span class="token keyword">const</span> itemMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=></span> <span class="token punctuation">[</span>item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span> item<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">function</span> <span class="token function">findItem</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">  <span class="token keyword control-flow">return</span> itemMap<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="// 优化前
function findItem(items, id) {
  return items.find(item => item.id === id);
}

// 优化后
const itemMap = new Map(items.map(item => [item.id, item]));
function findItem(id) {
  return itemMap.get(id);
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
        </ul>
        <h3 id="2-渲染优化"><a aria-hidden="true" tabindex="-1" href="#2-渲染优化" class="anchor"><span class="icon icon-link"></span></a>2. 渲染优化</h3>
        <ul>
          <li>
            <p><strong>虚拟列表</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 虚拟列表实现</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">VirtualList</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items<span class="token punctuation">,</span> height<span class="token punctuation">,</span> itemHeight <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword">const</span> <span class="token punctuation">[</span>startIndex<span class="token punctuation">,</span> setStartIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">  <span class="token keyword">const</span> visibleItems <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">ceil</span><span class="token punctuation">(</span>height <span class="token operator">/</span> itemHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">  
</span><span class="code-line line-number" line="6">  <span class="token keyword">const</span> displayItems <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token method function property-access">slice</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="7">    startIndex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="8">    startIndex <span class="token operator">+</span> visibleItems
</span><span class="code-line line-number" line="9">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">  
</span><span class="code-line line-number" line="11">  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
</span><span class="code-line line-number" line="12">    <span class="token operator">&#x3C;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token punctuation">,</span> <span class="token literal-property property">overflow</span><span class="token operator">:</span> <span class="token string">'auto'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
</span><span class="code-line line-number" line="13">      <span class="token punctuation">{</span>displayItems<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
</span><span class="code-line line-number" line="14">        <span class="token operator">&#x3C;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> itemHeight <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
</span><span class="code-line line-number" line="15">          <span class="token punctuation">{</span>item<span class="token punctuation">.</span><span class="token property-access">content</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">        <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line line-number" line="17">      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="18">    <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
</span><span class="code-line line-number" line="19">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="20"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="// 虚拟列表实现
function VirtualList({ items, height, itemHeight }) {
  const [startIndex, setStartIndex] = useState(0);
  const visibleItems = Math.ceil(height / itemHeight);
  
  const displayItems = items.slice(
    startIndex,
    startIndex + visibleItems
  );
  
  return (
    <div style={{ height, overflow: &#x27;auto&#x27; }}>
      {displayItems.map(item => (
        <div style={{ height: itemHeight }}>
          {item.content}
        </div>
      ))}
    </div>
  );
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p><strong>懒加载</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 图片懒加载</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> images <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img[data-src]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token parameter">entries</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">  entries<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">entry</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token property-access">isIntersecting</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">      <span class="token keyword">const</span> img <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">      img<span class="token punctuation">.</span><span class="token property-access">src</span> <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token property-access">dataset</span><span class="token punctuation">.</span><span class="token property-access">src</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">      observer<span class="token punctuation">.</span><span class="token method function property-access">unobserve</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13">images<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">img</span> <span class="token arrow operator">=></span> observer<span class="token punctuation">.</span><span class="token method function property-access">observe</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 图片懒加载
const images = document.querySelectorAll(&#x27;img[data-src]&#x27;);
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const img = entry.target;
      img.src = img.dataset.src;
      observer.unobserve(img);
    }
  });
});

images.forEach(img => observer.observe(img));
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
        </ul>
        <h2 id="资源优化"><a aria-hidden="true" tabindex="-1" href="#资源优化" class="anchor"><span class="icon icon-link"></span></a>资源优化</h2>
        <h3 id="1-静态资源"><a aria-hidden="true" tabindex="-1" href="#1-静态资源" class="anchor"><span class="icon icon-link"></span></a>1. 静态资源</h3>
        <ul>
          <li>
            <p><strong>图片优化</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 图片压缩配置</span>
</span><span class="code-line line-number" line="2">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token special-escape escape">\.</span><span class="token group punctuation">(</span>png<span class="token alternation keyword">|</span>jpg<span class="token alternation keyword">|</span>gif<span class="token group punctuation">)</span><span class="token anchor function">$</span></span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="6">      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'image-webpack-loader'</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="8">        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">          <span class="token literal-property property">mozjpeg</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="10">            <span class="token literal-property property">progressive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="11">            <span class="token literal-property property">quality</span><span class="token operator">:</span> <span class="token number">65</span>
</span><span class="code-line line-number" line="12">          <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">        <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14">      <span class="token punctuation">}</span><span class="token punctuation">]</span>
</span><span class="code-line line-number" line="15">    <span class="token punctuation">}</span><span class="token punctuation">]</span>
</span><span class="code-line line-number" line="16">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 图片压缩配置
module.exports = {
  module: {
    rules: [{
      test: /\.(png|jpg|gif)$/,
      use: [{
        loader: &#x27;image-webpack-loader&#x27;,
        options: {
          mozjpeg: {
            progressive: true,
            quality: 65
          }
        }
      }]
    }]
  }
};
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p><strong>资源打包</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// webpack 分包配置</span>
</span><span class="code-line line-number" line="2">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="6">      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">        <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token char-class"><span class="token char-class-punctuation punctuation">[</span><span class="token special-escape escape">\\</span>/<span class="token char-class-punctuation punctuation">]</span></span>node_modules<span class="token char-class"><span class="token char-class-punctuation punctuation">[</span><span class="token special-escape escape">\\</span>/<span class="token char-class-punctuation punctuation">]</span></span></span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="9">          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span>
</span><span class="code-line line-number" line="10">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="11">        <span class="token keyword module">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="13">          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="14">          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span>
</span><span class="code-line line-number" line="15">        <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">      <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="18">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="19"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// webpack 分包配置
module.exports = {
  optimization: {
    splitChunks: {
      chunks: &#x27;all&#x27;,
      cacheGroups: {
        vendors: {
          test: /[\\/]node_modules[\\/]/,
          priority: -10
        },
        default: {
          minChunks: 2,
          priority: -20,
          reuseExistingChunk: true
        }
      }
    }
  }
};
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
        </ul>
        <h3 id="2-缓存优化"><a aria-hidden="true" tabindex="-1" href="#2-缓存优化" class="anchor"><span class="icon icon-link"></span></a>2. 缓存优化</h3>
        <ul>
          <li>
            <p><strong>浏览器缓存</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 服务端缓存配置</span>
</span><span class="code-line line-number" line="2">app<span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token method function property-access">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token string">'1d'</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="4">  <span class="token literal-property property">etag</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="5">  <span class="token literal-property property">lastModified</span><span class="token operator">:</span> <span class="token boolean">true</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 服务端缓存配置
app.use(express.static(&#x27;public&#x27;, {
  maxAge: &#x27;1d&#x27;,
  etag: true,
  lastModified: true
}));
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p><strong>数据缓存</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 使用 Redis 缓存</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> <span class="token maybe-class-name">Redis</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ioredis'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">const</span> redis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getCachedData</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">  <span class="token keyword">const</span> cached <span class="token operator">=</span> <span class="token keyword control-flow">await</span> redis<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>cached<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span>cached<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">  
</span><span class="code-line line-number" line="9">  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">  <span class="token keyword control-flow">await</span> redis<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'EX'</span><span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">  <span class="token keyword control-flow">return</span> data<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="// 使用 Redis 缓存
const Redis = require(&#x27;ioredis&#x27;);
const redis = new Redis();

async function getCachedData(key) {
  const cached = await redis.get(key);
  if (cached) return JSON.parse(cached);
  
  const data = await fetchData();
  await redis.set(key, JSON.stringify(data), &#x27;EX&#x27;, 3600);
  return data;
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
        </ul>
        <h2 id="网络优化"><a aria-hidden="true" tabindex="-1" href="#网络优化" class="anchor"><span class="icon icon-link"></span></a>网络优化</h2>
        <h3 id="1-请求优化"><a aria-hidden="true" tabindex="-1" href="#1-请求优化" class="anchor"><span class="icon icon-link"></span></a>1. 请求优化</h3>
        <ul>
          <li>
            <p><strong>请求合并</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 使用 Promise.all 并行请求</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchAllData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword">const</span> <span class="token punctuation">[</span>users<span class="token punctuation">,</span> posts<span class="token punctuation">,</span> comments<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
</span><span class="code-line line-number" line="4">    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/users'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="5">    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/posts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="6">    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/comments'</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7">  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">    <span class="token literal-property property">users</span><span class="token operator">:</span> <span class="token keyword control-flow">await</span> users<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="10">    <span class="token literal-property property">posts</span><span class="token operator">:</span> <span class="token keyword control-flow">await</span> posts<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="11">    <span class="token literal-property property">comments</span><span class="token operator">:</span> <span class="token keyword control-flow">await</span> comments<span class="token punctuation">.</span><span class="token method function property-access">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="// 使用 Promise.all 并行请求
async function fetchAllData() {
  const [users, posts, comments] = await Promise.all([
    fetch(&#x27;/api/users&#x27;),
    fetch(&#x27;/api/posts&#x27;),
    fetch(&#x27;/api/comments&#x27;)
  ]);
  return {
    users: await users.json(),
    posts: await posts.json(),
    comments: await comments.json()
  };
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p><strong>数据压缩</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 服务端启用压缩</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> compression <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'compression'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">app<span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token function">compression</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">  <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="5">  <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">1024</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 服务端启用压缩
const compression = require(&#x27;compression&#x27;);
app.use(compression({
  level: 6,
  threshold: 100 * 1024
}));
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
        </ul>
        <h3 id="2-预加载优化"><a aria-hidden="true" tabindex="-1" href="#2-预加载优化" class="anchor"><span class="icon icon-link"></span></a>2. 预加载优化</h3>
        <ul>
          <li>
            <p><strong>资源预加载</strong>：</p>
            <pre class="language-html"><code class="language-html code-highlight"><span class="code-line line-number" line="1"><span class="token comment">&#x3C;!-- 预加载关键资源 --></span>
</span><span class="code-line line-number" line="2"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>critical.js<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>script<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="3"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preload<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>critical.css<span class="token punctuation">"</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>style<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token comment">&#x3C;!-- 预连接到重要域名 --></span>
</span><span class="code-line line-number" line="6"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>preconnect<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://api.example.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span></code><input type="hidden" value="<!-- 预加载关键资源 -->
<link rel=&#x22;preload&#x22; href=&#x22;critical.js&#x22; as=&#x22;script&#x22;>
<link rel=&#x22;preload&#x22; href=&#x22;critical.css&#x22; as=&#x22;style&#x22;>

<!-- 预连接到重要域名 -->
<link rel=&#x22;preconnect&#x22; href=&#x22;https://api.example.com&#x22;>
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p><strong>数据预取</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 路由预加载</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token string-property property">'/dashboard'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./dashboard'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="4">  <span class="token string-property property">'/settings'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword module">import</span><span class="token punctuation">(</span><span class="token string">'./settings'</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token comment">// 用户悬停时预加载</span>
</span><span class="code-line line-number" line="8">element<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">  <span class="token keyword">const</span> module <span class="token operator">=</span> routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">  <span class="token function">module</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 路由预加载
const routes = {
  &#x27;/dashboard&#x27;: () => import(&#x27;./dashboard&#x27;),
  &#x27;/settings&#x27;: () => import(&#x27;./settings&#x27;)
};

// 用户悬停时预加载
element.addEventListener(&#x27;mouseover&#x27;, () => {
  const module = routes[path];
  module();
});
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
        </ul>
        <h2 id="最佳实践"><a aria-hidden="true" tabindex="-1" href="#最佳实践" class="anchor"><span class="icon icon-link"></span></a>最佳实践</h2>
        <h3 id="1-开发阶段"><a aria-hidden="true" tabindex="-1" href="#1-开发阶段" class="anchor"><span class="icon icon-link"></span></a>1. 开发阶段</h3>
        <ul>
          <li>
            <p><strong>代码审查</strong>：</p>
            <pre><code class="code-highlight"><span class="code-line line-number" line="1">性能检查清单：
</span><span class="code-line line-number" line="2">□ 避免重复计算
</span><span class="code-line line-number" line="3">□ 优化循环结构
</span><span class="code-line line-number" line="4">□ 减少DOM操作
</span><span class="code-line line-number" line="5">□ 合理使用缓存
</span><span class="code-line line-number" line="6">□ 异步加载非关键资源
</span></code><input type="hidden" value="性能检查清单：
□ 避免重复计算
□ 优化循环结构
□ 减少DOM操作
□ 合理使用缓存
□ 异步加载非关键资源
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p><strong>性能测试</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 性能测试脚本</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">performanceTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">time</span><span class="token punctuation">(</span><span class="token string">'操作耗时'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">    <span class="token keyword control-flow">await</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="7">  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">timeEnd</span><span class="token punctuation">(</span><span class="token string">'操作耗时'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="// 性能测试脚本
async function performanceTest() {
  console.time(&#x27;操作耗时&#x27;);
  for (let i = 0; i < 1000; i++) {
    await operation();
  }
  console.timeEnd(&#x27;操作耗时&#x27;);
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
        </ul>
        <h3 id="2-生产环境"><a aria-hidden="true" tabindex="-1" href="#2-生产环境" class="anchor"><span class="icon icon-link"></span></a>2. 生产环境</h3>
        <ul>
          <li>
            <p><strong>监控告警</strong>：</p>
            <pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 性能监控</span>
</span><span class="code-line line-number" line="2"><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token keyword">const</span> timing <span class="token operator">=</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token property-access">timing</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">  <span class="token keyword">const</span> metrics <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">    <span class="token literal-property property">loadTime</span><span class="token operator">:</span> timing<span class="token punctuation">.</span><span class="token property-access">loadEventEnd</span> <span class="token operator">-</span> timing<span class="token punctuation">.</span><span class="token property-access">navigationStart</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="6">    <span class="token literal-property property">domReady</span><span class="token operator">:</span> timing<span class="token punctuation">.</span><span class="token property-access">domContentLoadedEventEnd</span> <span class="token operator">-</span> timing<span class="token punctuation">.</span><span class="token property-access">navigationStart</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="7">    <span class="token literal-property property">firstPaint</span><span class="token operator">:</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">getEntriesByType</span><span class="token punctuation">(</span><span class="token string">'paint'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">startTime</span>
</span><span class="code-line line-number" line="8">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">  
</span><span class="code-line line-number" line="10">  <span class="token comment">// 发送到监控系统</span>
</span><span class="code-line line-number" line="11">  <span class="token function">sendMetrics</span><span class="token punctuation">(</span>metrics<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><input type="hidden" value="// 性能监控
window.addEventListener(&#x27;load&#x27;, () => {
  const timing = performance.timing;
  const metrics = {
    loadTime: timing.loadEventEnd - timing.navigationStart,
    domReady: timing.domContentLoadedEventEnd - timing.navigationStart,
    firstPaint: performance.getEntriesByType(&#x27;paint&#x27;)[0].startTime
  };
  
  // 发送到监控系统
  sendMetrics(metrics);
});
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p><strong>持续优化</strong>：</p>
            <ol>
              <li>定期性能审查</li>
              <li>收集用户反馈</li>
              <li>分析性能数据</li>
              <li>优化改进方案</li>
            </ol>
          </li>
        </ul>
        <h2 id="小结"><a aria-hidden="true" tabindex="-1" href="#小结" class="anchor"><span class="icon icon-link"></span></a>小结</h2>
        <p>性能调优是一个持续的过程。建议：</p>
        <ol>
          <li>建立性能基准</li>
          <li>持续监控分析</li>
          <li>及时优化改进</li>
          <li>验证优化效果</li>
        </ol>
        <p>记住，性能优化要在保证功能正确的前提下进行，过度优化可能会带来维护困难。要根据实际需求和资源情况，选择合适的优化策略。</p>
        <section class="article-footer"><a href="https://github.com/zhangrenyang/cursor/blob/master/src\5.最佳实践\5.5.性能调优指南.md" class="edit-button" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
            </svg>
<span>Edit this page on GitHub</span>
</a><span class="atime">2025/02/01</span></section>
      </markdown-style>
      <nav class="tocs">
        <aside class="inner toc">
          <ol class="tocs-list">
            <li><a href="#基础概念" class="tocs-link">基础概念</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#1-什么是性能调优" class="tocs-link">1. 什么是性能调优？</a></li>
                <li><a href="#2-性能指标" class="tocs-link">2. 性能指标</a></li>
              </ol>
            </li>
            <li><a href="#性能分析" class="tocs-link">性能分析</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#1-性能监控" class="tocs-link">1. 性能监控</a></li>
                <li><a href="#2-问题定位" class="tocs-link">2. 问题定位</a></li>
              </ol>
            </li>
            <li><a href="#代码优化" class="tocs-link">代码优化</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#1-数据处理" class="tocs-link">1. 数据处理</a></li>
                <li><a href="#2-渲染优化" class="tocs-link">2. 渲染优化</a></li>
              </ol>
            </li>
            <li><a href="#资源优化" class="tocs-link">资源优化</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#1-静态资源" class="tocs-link">1. 静态资源</a></li>
                <li><a href="#2-缓存优化" class="tocs-link">2. 缓存优化</a></li>
              </ol>
            </li>
            <li><a href="#网络优化" class="tocs-link">网络优化</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#1-请求优化" class="tocs-link">1. 请求优化</a></li>
                <li><a href="#2-预加载优化" class="tocs-link">2. 预加载优化</a></li>
              </ol>
            </li>
            <li><a href="#最佳实践" class="tocs-link">最佳实践</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#1-开发阶段" class="tocs-link">1. 开发阶段</a></li>
                <li><a href="#2-生产环境" class="tocs-link">2. 生产环境</a></li>
              </ol>
            </li>
            <li><a href="#小结" class="tocs-link">小结</a></li>
          </ol>
        </aside>
      </nav>
    </div>
    <script src="../js/demo-preview.js?v=1.34.1"></script>
    <div class="footer warpper">Released under the MIT License. Copyright © 2022 Kenny Wong<br>Generated by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a></div>
    <script src="../js/tocbot.js?v=1.34.1"></script>
  </body>
</html>
